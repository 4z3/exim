# Internationalised mail: smtp
# Exim test configuration 4200
#
exim -DSERVER=server -bd -oX PORT_D
****
#
#
# Basic smtp input, no delivery
client 127.0.0.1 PORT_D
??? 220
EHLO client
??? 250-
??? 250-SIZE
??? 250-8BITMIME
??? 250-PIPELINING
??? 250-SMTPUTF8
??? 250 HELP
MAIL FROM: <someone@some.domain> SMTPUTF8
??? 250
RCPT TO: <userx@test.ex>
??? 250
DATA
??? 354
Subject: test

body
.
??? 250
QUIT
??? 221
****
#
#
# utf-8 from, Basic smtp input, no delivery
client 127.0.0.1 PORT_D
??? 220
EHLO client
??? 250-
??? 250-SIZE
??? 250-8BITMIME
??? 250-PIPELINING
??? 250-SMTPUTF8
??? 250 HELP
MAIL FROM: <ليهمابتكلموشعربي؟@czech.Pročprostěnemluvíčesky.com> SMTPUTF8
??? 250
RCPT TO: <userx@test.ex>
??? 250
DATA
??? 354
Subject: test

body
.
??? 250
QUIT
??? 221
****
#
#
# utf-8 from, -bs input and forwarding
exim -bs -odi
EHLO client.bh
MAIL FROM: <他们为什么不说中文@hebrew.למההםפשוטלאמדבריםעברית.com> SMTPUTF8
RCPT TO: <usery@test.ex>
DATA
Subject: test

body
.
QUIT
****
#
#
#
killdaemon
exim -DSERVER=server -qqff
****
#
#
exim -DSERVER=server -DOPTION="" -bd -oX PORT_D
****
#
# forwarding fails when target does not support SMTPUTF8
exim -bs -odi
EHLO client.ffail
MAIL FROM: <यहलोगहिन्दीक्योंनहींबोलसकतेहैं@japanese.なぜみんな日本語を話してくれないのか.local> SMTPUTF8
RCPT TO: <userz@test.ex>
DATA
Subject: test

body
.
QUIT
****
#
#
#
killdaemon
#
exim -qfl
****
#
#
#
#
#
exim -DSERVER=server -bd -oX PORT_D
****
#
# Recipient verify callout, pass
exim -bs -odi -DCONTROL="verify=recipient/callout"
EHLO client.bh
MAIL FROM: <세계의모든사람들이한국어를이해한다면얼마나좋을까@russian.почемужеонинеговорятпорусски.com> SMTPUTF8
RCPT TO: <userQ@test.ex>
DATA
Subject: test

body
.
QUIT
****
# Recipient+random verify callout, pass
exim -bs -odi -DCONTROL="verify=recipient/callout=random"
EHLO client.bh
MAIL FROM: <세계의모든사람들이한국어를이해한다면얼마나좋을까@russian.почемужеонинеговорятпорусски.com> SMTPUTF8
RCPT TO: <userR@test.ex>
DATA
Subject: test

body
.
QUIT
****
#
killdaemon
exim -DSERVER=server -qqff
****
#
#
#
#
#
exim -DSERVER=server -DOPTION="" -bd -oX PORT_D
****
#
# Recipient verify callout, fail
exim -bs -odi -DCONTROL="verify=recipient/callout"
EHLO client.ffail
MAIL FROM: <CALLER@spanish.PorquénopuedensimplementehablarenEspañol.local> SMTPUTF8
RCPT TO: <userS@test.ex>
QUIT
****
#
# Recipient+random verify callout, fail
exim -bs -odi -DCONTROL="verify=recipient/callout=random"
EHLO client.ffail
MAIL FROM: <CALLER@vietnamese.TạisaohọkhôngthểchỉnóitiếngViệt.local> SMTPUTF8
RCPT TO: <userT@test.ex>
QUIT
****
#
killdaemon
#
#
#
#
#
#
#
exim -DSERVER=server -bd -oX PORT_D
****
#
# utf-8 to, -bs input and forwarding
exim -bs -odi
EHLO client.bh
MAIL FROM: <userU@test.ex> SMTPUTF8
RCPT TO: <user.γλυκύρριζα@test.ex>
DATA
Subject: test

body
.
QUIT
****
#
killdaemon
exim -DSERVER=server -qqff
****
#
#
exim -DSERVER=server -bd -oX PORT_D
****
#
# sender verify callout, pass
exim -bs -odi -DCONTROL="verify=sender/callout"
EHLO client.bh
MAIL FROM: <userV.වැල්_මී@test.ex> SMTPUTF8
RCPT TO: <user.அதிமதுரம்@test.ex>
DATA
Subject: test

body
.
QUIT
****
# sender+random verify callout, pass
exim -bs -odi -DCONTROL="verify=sender/callout=random"
EHLO client.bh
MAIL FROM: <userW@test.ex> SMTPUTF8
RCPT TO: <user.ഇരട്ടിമധുരം@test.ex>
DATA
Subject: test

body
.
QUIT
****
#
killdaemon
exim -DSERVER=server -qqff
****
#
#
#
#
exim -DSERVER=server -DOPTION="" -bd -oX PORT_D
****
# sender verify callout, fail
exim -bs -odi -DCONTROL="verify=sender/callout"
EHLO client.sfail
MAIL FROM: <userA@test.ex> SMTPUTF8
RCPT TO: <user.यष्टिमधु@test.ex>
QUIT
****
# sender+random verify callout, fail
exim -bs -odi -DCONTROL="verify=sender/callout=random"
EHLO client.sfail
MAIL FROM: <userB.જેઠીમધ@test.ex> SMTPUTF8
RCPT TO: <user.ქართული@test.ex>
QUIT
****
#
killdaemon
